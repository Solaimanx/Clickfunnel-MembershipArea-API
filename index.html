
<div id="myProgress">
    <div id="myBar"></div>
  </div>
  <style>
    #myProgress {
    width: 100%;
    background-color: grey;
  }
  #myBar {
    width: 10%;
    height: 30px;
    background-color: green;
  }
    #tmp_headline1-14598{
     display:none; 
    }
    </style>



<script>  
    window.addEventListener('load',function(){
      console.log('fully loaded')
  const url = window.location.search
  const params = new URLSearchParams(url)
  const name = params.get('name')
  const email = params.get('email')



  const tagUrl = 'websitelink/add-basic-pro/' + name + '/' + email
  fetch(tagUrl).then((response)=> response.json())
  .then((data)=>{
  document.querySelector("#myBar").style.width = '25%'
  var password = data.password
  const paramsObj = {
    'member[email]': email,
    "member[password]": password,
    "member[password_confirmation]": password,
    "member[page_key]": "xoy7nhsch7g0292f",
    "member[page_id]": "33523349"
    };
  const searchParams = new URLSearchParams(paramsObj);
    const fetchData = searchParams.toString()
  fetch("https://www.english21days.co.il/members", {
    "headers": {
      "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9",
      "accept-language": "en",
      "cache-control": "max-age=0",
      "content-type": "application/x-www-form-urlencoded",
      "sec-ch-ua": "\"Chromium\";v=\"94\", \"Google Chrome\";v=\"94\", \";Not A Brand\";v=\"99\"",
      "sec-ch-ua-mobile": "?0",
      "sec-ch-ua-platform": "\"macOS\"",
      "sec-fetch-dest": "document",
      "sec-fetch-mode": "navigate",
      "sec-fetch-site": "same-origin",
      "sec-fetch-user": "?1",
      "upgrade-insecure-requests": "1"
    },
    "referrer": "https://www.english21days.co.il/login33523348?page_id=33523349&page_key=xoy7nhsch7g0292f&page_hash=42eccdbff95&login_redirect=1",
    "referrerPolicy": "strict-origin-when-cross-origin",
    "body": fetchData,
    "method": "POST",
    "mode": "cors",
    "credentials": "include"
  }).then(
  (res)=>{
    if(res.status == 200){
  document.querySelector("#myBar").style.width = '50%'
      const url = res.url
      if(url == 'https://www.english21days.co.il/course33523349'){
    const emailUrl = 'websitelink/send-success-email/' + name + '/' + email + '/' + password
  fetch(emailUrl).then((res)=> res.json())
  .then((result)=>{
  if(result.message == 'success'){
  document.querySelector("#myBar").style.width = '85%'
  document.querySelector('#headline-79864').style.display = 'none'
  document.querySelector('#tmp_headline1-14598').style.display = 'block'
  document.querySelector("#myBar").style.width = '100%'
  }else{
  console.log('email failed to send')
  }
  }).catch((error)=>{
  console.log(error)
  })
          }else{
  document.querySelector("#myBar").style.width = '85%'
  document.querySelector("#myBar").style.width = '100%'
  const redirect  = 'https://www.english21days.co.il/course33523349'
  window.location.href = redirect
  }
    }
  }
  ).catch((error)=>{
  console.log(error)
  });
  }).catch((error)=>{
  console.log(error)
  })
  })
    </script>





<script>


window.addEventListener('load',function(){
  console.log('fully loaded')
  const url = window.location.search
  const params = new URLSearchParams(url)
  const name = params.get('name')
  const email = params.get('email')


  const rawData = 'meta_web_form_id=1187827994&meta_split_id=&listname=awlist5578186&redirect=https%3A%2F%2Fwww.english21days.co.il%2Fthank-you1634999216449%2F%3Fname%3DMd%2BSolaiman%26email%3Dsolaiman321%2540gmail.com&meta_adtracking=English_by_the_way&meta_message=1&meta_required=name%2Cemail&meta_tooltip=&tag_112938890=english+by+the+way&contact%5Bname%5D=Md+Solaiman&contact%5Bfirst_name%5D=&contact%5Blast_name%5D=&contact%5Bemail%5D=solaiman321%40gmail.com&cf_affiliate_id=&webinar_delay=-63802855622282&purchase%5Bpayment_method_nonce%5D=&purchase%5Border_saas_url%5D=&contact%5Bcart_affiliate_id%5D=&userevents%5Bfunnel_id%5D=ZW5kdHFrbVlaQ3dOYmt3OStSaWRFQT09LS12NFlSNThvN0lob2VyMExlL1FXaHh3PT0%3D--df0de7e515bc7396fcef5a063650d384e179ff40&userevents%5Bpage_id%5D=eVJkSUpPSHlsQVlHMUkyRkVrWDQ1Zz09LS0vaXpVVFRWK3hRZkRvL01BK2pTa0t3PT0%3D--c8bc57d08ff82b60236a202b55ee65f0f442b119&userevents%5Bfunnel_step_id%5D=WW9HTnAyQ3hiK01SS3p3dFNlaTJvUT09LS1GdHJXWi95L3BSaEVaK2R3SnZVbElBPT0%3D--d6b920d99f1d990f1f5cc5b7d806d48b47b324db&userevents%5Buser_id%5D=SU1Kbm1LZnVvMGFadmVKK0pmV0x0dz09LS03SzBrVjljdEp0VXFWaWRiMnE4bGl3PT0%3D--1984e82d4b32bff73055d8c49145d9ace953108e&userevents%5Baccount_id%5D=eWE0eURvM2ZEMzNMQjAzWnhvTWVLUT09LS1MYTE3TVNBUnNWWFNaTUQ2WE1sUjlRPT0%3D--3c31ee1d793f91c937c5a6403f3a1406370edfca&userevents%5Bpage_code%5D=NDc3NzgzMzE%3D&userevents%5Bmode_id%5D=1&userevents%5Btime_zone%5D=America%2FChicago&userevents%5Bapp_domain%5D=app.clickfunnels.com&userevents%5Baff_sub2%5D=&userevents%5Baff_sub3%5D=&userevents%5Baff_sub%5D=&userevents%5Baffiliate_id%5D=&userevents%5Bcf_affiliate_id%5D=&userevents%5Bcontent%5D=&userevents%5Bmedium%5D=&userevents%5Bname%5D=&userevents%5Bsource%5D=&userevents%5Bterm%5D=&userevents%5Bclient_width%5D=1167&korg_b1_1850_nis=To+Udi&korg_b1_1850_nis=To+Udi'

  const newParams = new URLSearchParams(rawData)

  newParams.set('contact[name]',name)
  newParams.set('contact[email]',email)

  const data = newParams.toString()


  fetch("https://www.english21days.co.il/thank-you1617910678849", {
  "headers": {
    "accept": "*/*",
    "accept-language": "en",
    "content-type": "application/x-www-form-urlencoded; charset=UTF-8",
    "sec-ch-ua": "\"Google Chrome\";v=\"95\", \"Chromium\";v=\"95\", \";Not A Brand\";v=\"99\"",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "\"macOS\"",
    "sec-fetch-dest": "empty",
    "sec-fetch-mode": "cors",
    "sec-fetch-site": "same-origin",
    "x-requested-with": "XMLHttpRequest"
  },
  "referrer": "https://www.english21days.co.il/thank-you1617910678849",
  "referrerPolicy": "strict-origin-when-cross-origin",
  "body": data,
  "method": "POST",
  "mode": "cors",
  "credentials": "include"
}).then((res)=>{
  if(res.status == 200) {
    
    document.querySelector("#myBar").style.width = '25%'

    ///get the password


    var Password = {
 
 _pattern : /[a-zA-Z0-9]/,
 
 
 _getRandomByte : function()
 {
   // http://caniuse.com/#feat=getrandomvalues
   if(window.crypto && window.crypto.getRandomValues) 
   {
     var result = new Uint8Array(1);
     window.crypto.getRandomValues(result);
     return result[0];
   }
   else if(window.msCrypto && window.msCrypto.getRandomValues) 
   {
     var result = new Uint8Array(1);
     window.msCrypto.getRandomValues(result);
     return result[0];
   }
   else
   {
     return Math.floor(Math.random() * 256);
   }
 },
 
 generate : function(length)
 {
   return Array.apply(null, {'length': length})
     .map(function()
     {
       var result;
       while(true) 
       {
         result = String.fromCharCode(this._getRandomByte());
         if(this._pattern.test(result))
         {
           return result;
         }
       }        
     }, this)
     .join('');  
 }    
   
};


var newPassword = Password.generate(6)

    const paramsObj = {
  'member[email]': email,
  "member[password]": newPassword,
  "member[password_confirmation]": newPassword,
  "member[page_key]": "xoy7nhsch7g0292f",
  "member[page_id]": "33523349"
  };
const searchParams = new URLSearchParams(paramsObj);
  const fetchData = searchParams.toString()
fetch("https://www.english21days.co.il/members", {
  "headers": {
    "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9",
    "accept-language": "en",
    "cache-control": "max-age=0",
    "content-type": "application/x-www-form-urlencoded",
    "sec-ch-ua": "\"Chromium\";v=\"94\", \"Google Chrome\";v=\"94\", \";Not A Brand\";v=\"99\"",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "\"macOS\"",
    "sec-fetch-dest": "document",
    "sec-fetch-mode": "navigate",
    "sec-fetch-site": "same-origin",
    "sec-fetch-user": "?1",
    "upgrade-insecure-requests": "1"
  },
  "referrer": "https://www.english21days.co.il/login33523348?page_id=33523349&page_key=xoy7nhsch7g0292f&page_hash=42eccdbff95&login_redirect=1",
  "referrerPolicy": "strict-origin-when-cross-origin",
  "body": fetchData,
  "method": "POST",
  "mode": "cors",
  "credentials": "include"
}).then((res)=>{
  if(res.status == 200){
document.querySelector("#myBar").style.width = '50%'
    const url = res.url
    if(url == 'https://www.english21days.co.il/course33523349'){
  const emailUrl = 'https://clickfunnel-membership-area-api.vercel.app/send-success-email/' + name + '/' + email + '/' + newPassword
fetch(emailUrl).then((res)=> res.json())
.then((result)=>{
if(result.message == 'success'){
document.querySelector("#myBar").style.width = '85%'
document.querySelector('#headline-79864-152').style.display = 'none'
document.querySelector('#tmp_headline1-14598-126').style.display = 'block'
document.querySelector("#myBar").style.width = '100%'
}else{
console.log('email failed to send')
alert('אופס.. חלה תקלה בשליחת מייל פרטי גישה. אנא צור עימנו קשר בהקדם')
}
}).catch((error)=>{
console.log(error)
alert('אופס.. חלה תקלה בשליחת מייל פרטי גישה. אנא צור עימנו קשר בהקדם')
})
        }else{
document.querySelector("#myBar").style.width = '85%'
document.querySelector("#myBar").style.width = '100%'
const redirect  = 'https://www.english21days.co.il/course33523349'
window.location.href = redirect
}
  }
}
).catch((error)=>{
console.log(error)
});


    



  }else{
    console.log('failed to add tags ')

  }
}).catch((error)=>{
  console.log(error)
})


})
  


</script>







<script>  
  window.addEventListener('load',function(){
    console.log('fully loaded')

var password = data.password



const paramsObj = {
  'member[email]': email,
  "member[password]": password,
  "member[password_confirmation]": password,
  "member[page_key]": "xoy7nhsch7g0292f",
  "member[page_id]": "33523349"
  };
const searchParams = new URLSearchParams(paramsObj);
  const fetchData = searchParams.toString()
fetch("https://www.english21days.co.il/members", {
  "headers": {
    "accept": "text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9",
    "accept-language": "en",
    "cache-control": "max-age=0",
    "content-type": "application/x-www-form-urlencoded",
    "sec-ch-ua": "\"Chromium\";v=\"94\", \"Google Chrome\";v=\"94\", \";Not A Brand\";v=\"99\"",
    "sec-ch-ua-mobile": "?0",
    "sec-ch-ua-platform": "\"macOS\"",
    "sec-fetch-dest": "document",
    "sec-fetch-mode": "navigate",
    "sec-fetch-site": "same-origin",
    "sec-fetch-user": "?1",
    "upgrade-insecure-requests": "1"
  },
  "referrer": "https://www.english21days.co.il/login33523348?page_id=33523349&page_key=xoy7nhsch7g0292f&page_hash=42eccdbff95&login_redirect=1",
  "referrerPolicy": "strict-origin-when-cross-origin",
  "body": fetchData,
  "method": "POST",
  "mode": "cors",
  "credentials": "include"
}).then((res)=>{
  if(res.status == 200){
document.querySelector("#myBar").style.width = '50%'
    const url = res.url
    if(url == 'https://www.english21days.co.il/course33523349'){
  const emailUrl = 'https://clickfunnel-membership-area-api.vercel.app/send-success-email/' + name + '/' + email + '/' + password
fetch(emailUrl).then((res)=> res.json())
.then((result)=>{
if(result.message == 'success'){
document.querySelector("#myBar").style.width = '85%'
document.querySelector('#headline-79864-152').style.display = 'none'
document.querySelector('#tmp_headline1-14598-126').style.display = 'block'
document.querySelector("#myBar").style.width = '100%'
}else{
console.log('email failed to send')
alert('אופס.. חלה תקלה בשליחת מייל פרטי גישה. אנא צור עימנו קשר בהקדם')
}
}).catch((error)=>{
console.log(error)
alert('אופס.. חלה תקלה בשליחת מייל פרטי גישה. אנא צור עימנו קשר בהקדם')
})
        }else{
document.querySelector("#myBar").style.width = '85%'
document.querySelector("#myBar").style.width = '100%'
const redirect  = 'https://www.english21days.co.il/course33523349'
window.location.href = redirect
}
  }
}
).catch((error)=>{
console.log(error)
});



})
  </script>